# This file was auto-generated by the Firebase CLI	
# https://github.com/firebase/firebase-tools	

name: Deploy to stage	
'on':	
  push:	
    branches:	
      - dev	
jobs:	
  build_and_deploy:	
    runs-on: ubuntu-latest	
    steps:	
      - uses: actions/checkout@v2	

      - name: Install dependencies	
        run: yarn ci	

      - name: Configure for rinkeby	
        # if: github.ref == 'refs/heads/dev'	
        run: sh ./cli-process-env.sh rinkeby	

      - name: Build	
        run: yarn generate --fail-on-error	

      - name: Deploy to stage site	
        # if: github.ref == 'refs/heads/dev'	
        uses: matter-labs/action-hosting-deploy@v0	
        with:	
          firebaseServiceAccount: '${{ secrets.FIREBASE_SERVICE_ACCOUNT_ZKSYNC_VUE }}'	
          target: stage	
          projectId: zksync-vue	
          channelID: live